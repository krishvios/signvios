import UIKit

struct MarketingColors {
	// Primary color line
	static let black 		= #colorLiteral(red: 0, green: 0, blue: 0, alpha: 1) // #000000
	static let sorensonGold = #colorLiteral(red: 1, green: 0.7333333333, blue: 0.06666666667, alpha: 1) // #FFBB11
	static let sorensonGoldDark = #colorLiteral(red: 0.895450044, green: 0.6417391982, blue: 0, alpha: 1)
	static let silver		= #colorLiteral(red: 0.7019607843, green: 0.7019607843, blue: 0.7019607843, alpha: 1) // #B3B3B3
	static let seeMeeBlue   = #colorLiteral(red: 0.1764705882, green: 0.6156862745, blue: 0.8, alpha: 1) // #2D9DCC
	
	// Secondary color line
	static let gray 		= #colorLiteral(red: 0.2078431373, green: 0.2784313725, blue: 0.337254902, alpha: 1) // #354756
	static let metallicBlue = #colorLiteral(red: 0.3215686275, green: 0.4549019608, blue: 0.568627451, alpha: 1) // #527491
	static let grayBlue 	= #colorLiteral(red: 0.4470588235, green: 0.5647058824, blue: 0.6588235294, alpha: 1) // #7290A8
	static let crimson 		= #colorLiteral(red: 0.4705882353, green: 0.09019607843, blue: 0.1450980392, alpha: 1) // #781725
	
	// Tertiary color line
	static let blue 		= #colorLiteral(red: 0.2862745098, green: 0.4666666667, blue: 0.7019607843, alpha: 1) // #4977B3
	static let brown 		= #colorLiteral(red: 0.4980392157, green: 0.4509803922, blue: 0.3647058824, alpha: 1) // #7F735D
	static let green 		= #colorLiteral(red: 0.3058823529, green: 0.4666666667, blue: 0.09411764706, alpha: 1) // #4E7718
	static let khaki 		= #colorLiteral(red: 0.7450980392, green: 0.6039215686, blue: 0.3921568627, alpha: 1) // #BE9A64
	static let lightBlue 	= #colorLiteral(red: 0.5058823529, green: 0.7647058824, blue: 0.8470588235, alpha: 1) // #81C3D8
	static let midnightBlue = #colorLiteral(red: 0.3843137255, green: 0.3725490196, blue: 0.6, alpha: 1) // #625F99
	static let oliveGreen 	= #colorLiteral(red: 0.6862745098, green: 0.631372549, blue: 0.07843137255, alpha: 1) // #AFA114
	static let warmGray 	= #colorLiteral(red: 0.5921568627, green: 0.6509803922, blue: 0.6117647059, alpha: 1) // #97A69C
}

struct VPColors {
	static let blue 		= #colorLiteral(red: 0.0862745098, green: 0.4196078431, blue: 0.7176470588, alpha: 1) // #166BB7
	static let blueSlate 	= #colorLiteral(red: 0.5960784314, green: 0.7019607843, blue: 0.737254902, alpha: 1) // #98B3BC
	static let caesia 		= #colorLiteral(red: 0.5450980392, green: 0.5294117647, blue: 0.5058823529, alpha: 1) // #8B8781
	static let castlerock 	= #colorLiteral(red: 0.2705882353, green: 0.262745098, blue: 0.2509803922, alpha: 1) // #454340
	static let charcoal 	= #colorLiteral(red: 0.1333333333, green: 0.1333333333, blue: 0.1333333333, alpha: 1) // #222222
	static let cimmaron 	= #colorLiteral(red: 0.137254902, green: 0.1333333333, blue: 0.1254901961, alpha: 1) // #232220
	static let darkBeige 	= #colorLiteral(red: 0.8745098039, green: 0.8352941176, blue: 0.7725490196, alpha: 1) // #DFD5C5
	static let darkBlue 	= #colorLiteral(red: 0.2470588235, green: 0.3647058824, blue: 0.5333333333, alpha: 1) // #3F5D88
	static let darkGray 	= #colorLiteral(red: 0.4666666667, green: 0.4666666667, blue: 0.4666666667, alpha: 1) // #777777
	static let darkSlate 	= #colorLiteral(red: 0.4078431373, green: 0.3960784314, blue: 0.3764705882, alpha: 1) // #686560
	static let greyhound 	= #colorLiteral(red: 0.6823529412, green: 0.662745098, blue: 0.631372549, alpha: 1) // #AEA9A1
	static let hamilton 	= #colorLiteral(red: 0.5254901961, green: 0.6235294118, blue: 0.6941176471, alpha: 1) // #869FB1
	static let imperial 	= #colorLiteral(red: 0.3490196078, green: 0.4156862745, blue: 0.462745098, alpha: 1) // #596A76
	static let lightBeige 	= #colorLiteral(red: 0.9529411765, green: 0.9254901961, blue: 0.8823529412, alpha: 1) // #F3ECE1
	static let lightGray 	= #colorLiteral(red: 0.8, green: 0.8, blue: 0.8, alpha: 1) // #CCCCCC
	static let london		= #colorLiteral(red: 0.8156862745, green: 0.7921568627, blue: 0.7568627451, alpha: 1) // #D0CAC1
	static let mediumBeige 	= #colorLiteral(red: 0.9137254902, green: 0.8784313725, blue: 0.8274509804, alpha: 1) // #E9E0D3
	static let mediumGrey 	= #colorLiteral(red: 0.6666666667, green: 0.6666666667, blue: 0.6666666667, alpha: 1) // #AAAAAA
	static let mint 		= #colorLiteral(red: 0.6666666667, green: 0.7803921569, blue: 0.7764705882, alpha: 1) // #AAC7C6
	static let pale 		= #colorLiteral(red: 0.8901960784, green: 0.9254901961, blue: 0.9254901961, alpha: 1) // #E3ECEC
	static let parisian 	= #colorLiteral(red: 0.1764705882, green: 0.2078431373, blue: 0.231372549, alpha: 1) // #2D353B
	static let pewter 		= #colorLiteral(red: 0.2666666667, green: 0.2666666667, blue: 0.2666666667, alpha: 1) // #444444
	static let rust 		= #colorLiteral(red: 0.9098039216, green: 0.368627451, blue: 0.2274509804, alpha: 1) // #E85E3A
	static let rust_Section	= #colorLiteral(red: 0.7137254902, green: 0.2901960784, blue: 0.1803921569, alpha: 1) // #B64A2E
	static let silver 		= #colorLiteral(red: 0.6666666667, green: 0.6666666667, blue: 0.6666666667, alpha: 1) // #AAAAAA
	static let surf 		= #colorLiteral(red: 0.7764705882, green: 0.8549019608, blue: 0.8509803922, alpha: 1) // #C6DAD9
	static let teal 		= #colorLiteral(red: 0, green: 0.6509803922, blue: 0.6117647059, alpha: 1) // #00A69C
	static let teal_Section	= #colorLiteral(red: 0, green: 0.4549019608, blue: 0.4274509804, alpha: 1) // #00746D
	static let tealGreen 	= VPColors.teal
	static let yellow 		= #colorLiteral(red: 1, green: 0.7568627451, blue: 0.02745098039, alpha: 1) // #FFC107
	static let yellow_Focus	= #colorLiteral(red: 0.9725490196, green: 0.9058823529, blue: 0.1098039216, alpha: 1) // #F8E71C
	static let yellow_Mint 	= #colorLiteral(red: 1, green: 0.7568627451, blue: 0.02745098039, alpha: 1) // #FFC107
	static let yellow_Section = #colorLiteral(red: 0.6352941176, green: 0.4352941176, blue: 0.2117647059, alpha: 1) // #A26F36
	static let xDarkBlue 	= #colorLiteral(red: 0.1215686275, green: 0.1764705882, blue: 0.2549019608, alpha: 1) // #1F2D41
	static let xLightGray 	= #colorLiteral(red: 0.7882352941, green: 0.7882352941, blue: 0.7882352941, alpha: 1) // #C9C9C9
	static let mikado 		= #colorLiteral(red: 0.2235294118, green: 0.1568627451, blue: 0.08235294118, alpha: 1) // #392815
	static let sambuca 		= #colorLiteral(red: 0.2078431373, green: 0.0862745098, blue: 0.05882352941, alpha: 1) // #35160F
	static let tiber 		= #colorLiteral(red: 0.01568627451, green: 0.1568627451, blue: 0.1490196078, alpha: 1) // #042826
	static let mirage 		= #colorLiteral(red: 0.09019607843, green: 0.1254901961, blue: 0.1803921569, alpha: 1) // #17202E
}

struct LightRingColors {
	static let magenta		= #colorLiteral(red: 1, green: 0, blue: 0.5019607843, alpha: 1) // #FF0080
	static let orange 		= #colorLiteral(red: 1, green: 0.5019607843, blue: 0.2509803922, alpha: 1) // #FF8040
	static let yellow 		= #colorLiteral(red: 1, green: 0.7529411765, blue: 0, alpha: 1) // #FFC000
	static let teal 		= #colorLiteral(red: 0, green: 0.6509803922, blue: 0.6117647059, alpha: 1) // #00A69C
	static let cyan 		= #colorLiteral(red: 0, green: 0.7529411765, blue: 1, alpha: 1) // #00C0FF
	static let blue 		= #colorLiteral(red: 0, green: 0.2509803922, blue: 0.7529411765, alpha: 1) // #0040C0
	static let violet 		= #colorLiteral(red: 0.5019607843, green: 0, blue: 0.5019607843, alpha: 1) // #800080
	static let magentaLight	= #colorLiteral(red: 0.9215686275, green: 0.1411764706, blue: 0.5725490196, alpha: 1) // #EB2492
	static let orangeLight 	= #colorLiteral(red: 1, green: 0.5803921569, blue: 0.2862745098, alpha: 1) // #FF9449
	static let yellowLight 	= #colorLiteral(red: 1, green: 0.8352941176, blue: 0.2196078431, alpha: 1) // #FFD538
	static let tealLight 	= #colorLiteral(red: 0.1450980392, green: 0.7019607843, blue: 0.6666666667, alpha: 1) // #25B3AA
	static let cyanLight 	= #colorLiteral(red: 0.1176470588, green: 0.7803921569, blue: 0.8823529412, alpha: 1) // #1EC7E1
	static let blueLight 	= #colorLiteral(red: 0.1529411765, green: 0.462745098, blue: 0.7921568627, alpha: 1) // #2776CA
	static let violetLight 	= #colorLiteral(red: 0.6, green: 0.2509803922, blue: 0.6, alpha: 1) // #994099
}

struct FlatColors {
	static let red = #colorLiteral(red: 1, green: 0.231372549, blue: 0.1882352941, alpha: 1)
	static let orange = #colorLiteral(red: 1, green: 0.5843137255, blue: 0, alpha: 1)
	static let yellow = #colorLiteral(red: 1, green: 0.8, blue: 0, alpha: 1)
	static let green = #colorLiteral(red: 0.2980392157, green: 0.8509803922, blue: 0.3921568627, alpha: 1)
	static let lightBlue = #colorLiteral(red: 0.3529411765, green: 0.7843137255, blue: 0.9803921569, alpha: 1)
	static let darkBlue = #colorLiteral(red: 0, green: 0.4784313725, blue: 1, alpha: 1)
	static let purple = #colorLiteral(red: 0.3450980392, green: 0.337254902, blue: 0.8392156863, alpha: 1)
	static let pink = #colorLiteral(red: 1, green: 0.1764705882, blue: 0.3333333333, alpha: 1)
}

struct HighContrastDarkColors {
	static let red = #colorLiteral(red: 0.9215686275, green: 0.04705882353, blue: 0, alpha: 1)
	static let green = #colorLiteral(red: 0.1450980392, green: 0.5333333333, blue: 0.2117647059, alpha: 1)
	static let blue = #colorLiteral(red: 0, green: 0.4431372549, blue: 0.9215686275, alpha: 1)
	
	static let yellow = #colorLiteral(red: 1, green: 0.937254902, blue: 0, alpha: 1)
	
	static let darkestGray = #colorLiteral(red: 0.1333333333, green: 0.1333333333, blue: 0.1333333333, alpha: 1)
	static let darkerGray = #colorLiteral(red: 0.2549019754, green: 0.2745098174, blue: 0.3019607961, alpha: 1)
	static let lighterGray = #colorLiteral(red: 0.6000000238, green: 0.6000000238, blue: 0.6000000238, alpha: 1)
	static let lightestGray = #colorLiteral(red: 0.8196078431, green: 0.8196078431, blue: 0.8392156863, alpha: 1)
}

struct Theme {
	// MARK: - Common theme colors
	
	static let black = #colorLiteral(red: 0.06666666667, green: 0.06666666667, blue: 0.06666666667, alpha: 1)
	
	static let lightestGray = #colorLiteral(red: 0.9529411765, green: 0.9529411765, blue: 0.9529411765, alpha: 1) // #F3F3F3
	static let lighterGray 	= #colorLiteral(red: 0.8509803922, green: 0.8509803922, blue: 0.8509803922, alpha: 1) // #D9D9D9
	static let lightGray 	= #colorLiteral(red: 0.7843137255, green: 0.7803921569, blue: 0.8, alpha: 1) // #C8C7CC
	static let mediumGray 	= #colorLiteral(red: 0.5725490196, green: 0.5725490196, blue: 0.5725490196, alpha: 1) // #929292
	static let darkGray 	= #colorLiteral(red: 0.3647058824, green: 0.3647058824, blue: 0.3647058824, alpha: 1) // #5D5C5D
	static let darkerGray 	= #colorLiteral(red: 0.2549019608, green: 0.2431372549, blue: 0.2509803922, alpha: 1) // #413E40
	static let darkestGray 	= #colorLiteral(red: 0.2078431373, green: 0.2, blue: 0.2039215686, alpha: 1) // #353334
	
	static let lighterRed 	= #colorLiteral(red: 0.9254901961, green: 0.3333333333, blue: 0.3333333333, alpha: 1) // #EC5555
	static let lightRed 	= #colorLiteral(red: 0.9568627451, green: 0.262745098, blue: 0.2117647059, alpha: 1) // #F44336
	static let red 			= #colorLiteral(red: 0.9176470588, green: 0.2, blue: 0.137254902, alpha: 1) // #EA3323
	
	// MARK: - Theme metadata
	
	let identifier: String
	let name: String
	
	
	// MARK: - App Style
	
	let statusBarStyle: UIStatusBarStyle
	let keyboardAppearance: UIKeyboardAppearance
	
	
	// MARK: - View Controllers
	
	let backgroundColor: UIColor
	let tintColor: UIColor
	let textColor: UIColor
	let secondaryTextColor: UIColor
	let placeholderTextColor: UIColor
	
	
	// MARK: - Navigation Bar
	
	let navBackgroundColor: UIColor
	let navTintColor: UIColor
	let navTextColor: UIColor
	let navSecondaryTextColor: UIColor
	let navBarStyle: UIBarStyle
	let navTranslucent: Bool
	
	
	// MARK: - Search Bar
	
	let searchBackgroundColor: UIColor
	let searchTintColor: UIColor
	let searchBarStyle: UIBarStyle
	let searchTranslucent: Bool
	
	
	// MARK: - Tab Bar
	
	let tabBarBackgroundColor: UIColor
	let tabBarUnselectedColor: UIColor
	let tabBarTintColor: UIColor
	let tabBarBadgeColor: UIColor
	let tabBarTranslucent: Bool
	
	
	// MARK: - Tables
	
	let tableSeparatorColor: UIColor
	let tableSectionIndexBackgroundColor: UIColor
	let tableSectionIndexTextColor: UIColor
	let tableHeaderBackgroundColor: UIColor
	let tableHeaderTextColor: UIColor
	let tableHeaderGroupedTextColor: UIColor
	let tableHeaderFont: UIFont
	let tableFooterBackgroundColor: UIColor
	let tableFooterTextColor: UIColor
	let tableFooterGroupedTextColor: UIColor
	let tableFooterFont: UIFont
	
	let tableRowPrimaryActionBackgroundColor: UIColor
	let tableRowSecondaryActionBackgroundColor: UIColor
	let tableRowDestructiveActionBackgroundColor: UIColor
	
	// MARK: - Table Cells
	
	let tableCellBackgroundColor: UIColor
	let tableCellTintColor: UIColor
	let tableCellDetailTintColor: UIColor
	let tableCellTextColor: UIColor
	let tableCellFont: UIFont
	let tableCellPlaceholderTextColor: UIColor
	let tableCellSecondaryTextColor: UIColor
	let tableCellSecondaryFont: UIFont
	let tableCellAlertTextColor: UIColor
	
	
	// MARK: - Contact Placeholders
	
	let contactPlaceholderColors: [(backgroundColor: UIColor, textColor: UIColor)]
	let contactPlaceholderFont: UIFont
	
	
	// MARK: - Login
	
	let loginFont: UIFont
	let loginAppVersionFont: UIFont
	
	
	// MARK: - Keypad
	
	let keypadStatusBarStyle: UIStatusBarStyle
	let keypadBackgroundColor: UIColor
	let keypadBlurEffectStyle: UIBlurEffect.Style
	
	let keypadButtonBackgroundColor: UIColor
	let keypadButtonTextColor: UIColor
	let keypadButtonFont: UIFont
	let keypadButtonSecondaryTextColor: UIColor
	let keypadButtonSecondaryFont: UIFont
	let keypadButtonHighlightedColor: UIColor
	let keypadToggleHighlightedColor: UIColor
	let keypadToggleSelectedColor: UIColor
	let keypadButtonBorderWidth: CGFloat
	let keypadButtonBorderColor: UIColor
	
	let keypadPrimaryButtonBackgroundColor: UIColor
	let keypadPrimaryButtonTextColor: UIColor
	let keypadPrimaryButtonHighlightedColor: UIColor
	let keypadPrimaryButtonBorderWidth: CGFloat
	let keypadPrimaryButtonBorderColor: UIColor
	
	let keypadUserPhoneNumberBackground: UIColor
	let keypadUserPhoneNumberTextColor: UIColor
	let keypadUserPhoneNumberAlertBackground: UIColor
	let keypadUserPhoneNumberAlertTextColor: UIColor
	let keypadUserPhoneNumberFont: UIFont
	
	let keypadContactNameTintColor: UIColor
	let keypadContactNameTextColor: UIColor
	let keypadContactNameFont: UIFont
	
	let keypadInputTextColor: UIColor
	let keypadInputFont: UIFont
	
	
	// MARK: - Recents Summary
	
	let recentsSummaryBlurStyle: UIBlurEffect.Style
	let recentsSummaryBackgroundColor: UIColor
	let recentsSummaryTextColor: UIColor
	let recentsSummarySecondaryTextColor: UIColor
	let recentsSummaryAlertTextColor: UIColor
	let recentsSummaryHighlightedColor: UIColor
	
	// MARK: - Segmented Control
	
	let segmentedControlTintColor: UIColor
	let segmentedControlTextColor: UIColor
	let segmentedControlSecondaryTextColor: UIColor
}

// MARK: Applying a theme
extension Theme {
	
	func applyTintColor(_ color: UIColor, in containers: [UIAppearanceContainer.Type]) {
		UIProgressView.appearance(whenContainedInInstancesOf: containers).progressTintColor = color
		UISwitch.appearance(whenContainedInInstancesOf: containers).onTintColor = color
	}
	
	func applyTheme() {
		
		UIProgressView.appearance().progressTintColor = tintColor
		UISwitch.appearance().onTintColor = tintColor
		
		// Navigation bar
		if #available(iOS 13.0, *) {
			let appearance = UINavigationBarAppearance()
			appearance.configureWithOpaqueBackground()
			appearance.backgroundColor = navBackgroundColor
			appearance.titleTextAttributes = [.foregroundColor : navTextColor]
			appearance.largeTitleTextAttributes = [.foregroundColor : navTextColor]
			UINavigationBar.appearance().standardAppearance = appearance
			UINavigationBar.appearance().scrollEdgeAppearance = appearance
		}
		
		UINavigationBar.appearance().barTintColor = navBackgroundColor
		UINavigationBar.appearance().tintColor = navTintColor
		UINavigationBar.appearance().titleTextAttributes = [.foregroundColor : navSecondaryTextColor]
		if #available(iOS 11.0, *) {
			UINavigationBar.appearance().largeTitleTextAttributes = [.foregroundColor : navTextColor]
		}
		UINavigationBar.appearance().barStyle = navBarStyle
		UINavigationBar.appearance().isTranslucent = navTranslucent
		UIToolbar.appearance().barTintColor = navBackgroundColor
		UIToolbar.appearance().tintColor = navTintColor
		UIToolbar.appearance().isTranslucent = navTranslucent
		UIToolbar.appearance().barStyle = navBarStyle
		
		// Search bar
		UISearchBar.appearance().barTintColor = searchBackgroundColor
		UISearchBar.appearance().tintColor = searchTintColor
		UISearchBar.appearance().barStyle = searchBarStyle
		UISearchBar.appearance().isTranslucent = searchTranslucent
		
		// Tab bar
		UITabBar.appearance().backgroundColor = tabBarBackgroundColor
		UITabBar.appearance().tintColor = tabBarTintColor
		UITabBar.appearance().unselectedItemTintColor = tabBarUnselectedColor
		UITabBar.appearance().isTranslucent = tabBarTranslucent
		UITabBarItem.appearance().badgeColor = tabBarBadgeColor
		if #available(iOS 15, *) {
			// Fixes navigation Bar's transparent issue on Xcode 13
			UITabBar.appearance().backgroundColor = navBackgroundColor
			
		}
		
		// Table
		UITableView.appearance().backgroundColor = backgroundColor // UITableView is the only case where we know we can apply a background color.
		UITableView.appearance().separatorColor = tableSeparatorColor
		UITableView.appearance().sectionIndexBackgroundColor = tableSectionIndexBackgroundColor
		UITableView.appearance().sectionIndexColor = tableSectionIndexTextColor
		
		// Table cells
		ThemedTableViewCell.appearance().backgroundColor = tableCellBackgroundColor
		ThemedTableViewCell.appearance().tintColor = tableCellTintColor
		applyTintColor(tableCellTintColor, in: [ThemedTableViewCell.self])
		
		// Segmented Control
		if #available(iOS 13.0, *) {
			UISegmentedControl.appearance().selectedSegmentTintColor = segmentedControlTintColor
		} else {
			UISegmentedControl.appearance().tintColor = segmentedControlTintColor
		}
		UISegmentedControl.appearance().setTitleTextAttributes([.foregroundColor: segmentedControlTextColor], for: .normal)
		UISegmentedControl.appearance().setTitleTextAttributes([.foregroundColor: segmentedControlSecondaryTextColor], for: .selected)
	}
	
	func resetThemes() {
		Theme.themes = Theme.loadThemes()
	}
}

extension Theme {
	static let themeDidChangeNotification = Notification.Name("ThemeDidChangeNotification")
	
	static var currentThemeIdentifier = UserDefaults.standard.selectedThemeIdentifier {
		didSet {
			UserDefaults.standard.selectedThemeIdentifier = currentThemeIdentifier
			if oldValue != currentThemeIdentifier {
				NotificationCenter.default.post(name: Theme.themeDidChangeNotification, object: nil)
			}
			
			Theme.current.applyTheme()
			
			// Trigger a rerender of the entire app.
			UIApplication.shared.delegate?.window??.subviews.forEach { view in
				view.removeFromSuperview()
				UIApplication.shared.delegate?.window??.addSubview(view)
			}
		}
	}
	
	static var current: Theme {
		return themes.first { $0.identifier == currentThemeIdentifier } ?? themes.first!
	}
	
	static let fontWeight: FontWeight = .light
	static let boldFontWeight: FontWeight = .semibold
	
	static var themes: [Theme] = loadThemes()

	static func loadThemes() -> [Theme] {
		return [
			Theme(
				identifier: "dark",
				name: "Dark (default)".localized,

				statusBarStyle: .lightContent,
				keyboardAppearance: .dark,

				backgroundColor: Theme.darkestGray,
				tintColor: MarketingColors.sorensonGold,
				textColor: .white,
				secondaryTextColor: .lightGray,
				placeholderTextColor: .lightGray,

				navBackgroundColor: Theme.darkestGray,
				navTintColor: MarketingColors.sorensonGold,
				navTextColor: .white,
				navSecondaryTextColor: .white,
				navBarStyle: .black,
				navTranslucent: false,

				searchBackgroundColor: Theme.darkestGray,
				searchTintColor: MarketingColors.sorensonGold,
				searchBarStyle: .black,
				searchTranslucent: false,

				tabBarBackgroundColor: .black,
				tabBarUnselectedColor: Theme.mediumGray,
				tabBarTintColor: MarketingColors.sorensonGold,
				tabBarBadgeColor: VPColors.rust,
				tabBarTranslucent: true,

				tableSeparatorColor: Theme.darkGray,
				tableSectionIndexBackgroundColor: .clear,
				tableSectionIndexTextColor: MarketingColors.sorensonGold,
				tableHeaderBackgroundColor: Theme.darkestGray,
				tableHeaderTextColor: MarketingColors.sorensonGold,
				tableHeaderGroupedTextColor: MarketingColors.sorensonGold,
				tableHeaderFont: UIFont(for: .footnote, at: .regular),
				tableFooterBackgroundColor: Theme.darkestGray,
				tableFooterTextColor: .white,
				tableFooterGroupedTextColor: .gray,
				tableFooterFont: UIFont(for: .footnote, at: .regular),

				tableRowPrimaryActionBackgroundColor: HighContrastDarkColors.green,
				tableRowSecondaryActionBackgroundColor: HighContrastDarkColors.blue,
				tableRowDestructiveActionBackgroundColor: HighContrastDarkColors.red,

				tableCellBackgroundColor: Theme.darkerGray,
				tableCellTintColor: MarketingColors.sorensonGold, tableCellDetailTintColor: MarketingColors.sorensonGold,
				tableCellTextColor: .white,
				tableCellFont: UIFont(for: .headline, at: .bold),
				tableCellPlaceholderTextColor: UIColor.white.withAlphaComponent(0.33),
				tableCellSecondaryTextColor: Theme.lightGray,
				tableCellSecondaryFont: UIFont(for: .subheadline, at: .medium),
				tableCellAlertTextColor: Theme.lighterRed,

				contactPlaceholderColors: [
					(backgroundColor: .white, textColor: .black),
					(backgroundColor: LightRingColors.magentaLight, textColor: .white),
					(backgroundColor: LightRingColors.orangeLight, textColor: .black),
					(backgroundColor: LightRingColors.yellowLight, textColor: .black),
					(backgroundColor: LightRingColors.tealLight, textColor: .black),
					(backgroundColor: LightRingColors.cyanLight, textColor: .black),
					(backgroundColor: LightRingColors.blueLight, textColor: .white),
					(backgroundColor: LightRingColors.magentaLight, textColor: .white)
				],
				contactPlaceholderFont: UIFont(for: .title1, at: fontWeight, size: 28),
				
				loginFont: UIFont(for: .title3, maxSize: 30),
				loginAppVersionFont: UIFont(for: .footnote, maxSize: 18),

				keypadStatusBarStyle: .lightContent,
				keypadBackgroundColor: UIColor.white.withAlphaComponent(0.25),
				keypadBlurEffectStyle: .dark,
				keypadButtonBackgroundColor: UIColor.white.withAlphaComponent(0.1),
				keypadButtonTextColor: .white,
				keypadButtonFont: UIFont(for: .title1, at: fontWeight, maxSize: 60),
				keypadButtonSecondaryTextColor: .white,
				keypadButtonSecondaryFont: UIFont(for: .caption1, at: fontWeight, maxSize: 20),
				keypadButtonHighlightedColor: MarketingColors.sorensonGold,
				keypadToggleHighlightedColor: Theme.darkestGray.withAlphaComponent(0.8),
				keypadToggleSelectedColor: UIColor.white.withAlphaComponent(0.4),
				keypadButtonBorderWidth: 0,
				keypadButtonBorderColor: .clear,
				keypadPrimaryButtonBackgroundColor: MarketingColors.sorensonGold,
				keypadPrimaryButtonTextColor: .white,
				keypadPrimaryButtonHighlightedColor: .white,
				keypadPrimaryButtonBorderWidth: 0,
				keypadPrimaryButtonBorderColor: .clear,

				keypadUserPhoneNumberBackground: .clear,
				keypadUserPhoneNumberTextColor: .white,
				keypadUserPhoneNumberAlertBackground: Theme.red,
				keypadUserPhoneNumberAlertTextColor: .white,
				keypadUserPhoneNumberFont: UIFont(for: .subheadline, at: .semibold, maxSize: 40),

				keypadContactNameTintColor: MarketingColors.sorensonGold,
				keypadContactNameTextColor: .white,
				keypadContactNameFont: UIFont(for: .title2, at: fontWeight, maxSize: 40),

				keypadInputTextColor: .white,
				keypadInputFont: UIFont(for: .title1, at: fontWeight, maxSize: 55),

				recentsSummaryBlurStyle: .light,
				recentsSummaryBackgroundColor: .clear,
				recentsSummaryTextColor: Theme.darkestGray,
				recentsSummarySecondaryTextColor: .black,
				recentsSummaryAlertTextColor: Theme.red,
				recentsSummaryHighlightedColor: UIColor.white.withAlphaComponent(0.5),

				segmentedControlTintColor: MarketingColors.sorensonGold,
				segmentedControlTextColor: .white,
				segmentedControlSecondaryTextColor: .black
			),
			Theme(
				identifier: "light",
				name: "Light".localized,

				statusBarStyle: .default,
				keyboardAppearance: .light,

				backgroundColor: Theme.lightestGray,
				tintColor: MarketingColors.blue,
				textColor: .black,
				secondaryTextColor: Theme.darkestGray,
				placeholderTextColor: Theme.lightGray,

				navBackgroundColor: Theme.lightestGray,
				navTintColor: MarketingColors.blue,
				navTextColor: .black,
				navSecondaryTextColor: .black,
				navBarStyle: .default,
				navTranslucent: false,

				searchBackgroundColor: Theme.lightestGray,
				searchTintColor: MarketingColors.blue,
				searchBarStyle: .default,
				searchTranslucent: false,

				tabBarBackgroundColor: Theme.lightestGray,
				tabBarUnselectedColor: Theme.mediumGray,
				tabBarTintColor: MarketingColors.blue,
				tabBarBadgeColor: VPColors.rust,
				tabBarTranslucent: true,

				tableSeparatorColor: Theme.lighterGray,
				tableSectionIndexBackgroundColor: .clear,
				tableSectionIndexTextColor: MarketingColors.blue,
				tableHeaderBackgroundColor: .clear,
				tableHeaderTextColor: Theme.darkerGray,
				tableHeaderGroupedTextColor: Theme.darkerGray,
				tableHeaderFont: UIFont(for: .footnote, at: .regular),
				tableFooterBackgroundColor: .clear,
				tableFooterTextColor: Theme.darkerGray,
				tableFooterGroupedTextColor: Theme.darkerGray,
				tableFooterFont: UIFont(for: .footnote, at: .regular),

				tableRowPrimaryActionBackgroundColor: HighContrastDarkColors.green,
				tableRowSecondaryActionBackgroundColor: HighContrastDarkColors.blue,
				tableRowDestructiveActionBackgroundColor: HighContrastDarkColors.red,

				tableCellBackgroundColor: .white,
				tableCellTintColor: MarketingColors.blue, tableCellDetailTintColor: MarketingColors.blue,
				tableCellTextColor: Theme.black,
				tableCellFont: UIFont(for: .headline, at: .bold),
				tableCellPlaceholderTextColor: UIColor.black.withAlphaComponent(0.33),
				tableCellSecondaryTextColor: Theme.darkGray,
				tableCellSecondaryFont: UIFont(for: .subheadline, at: .medium),
				tableCellAlertTextColor: VPColors.rust,

				contactPlaceholderColors: [
					(backgroundColor: Theme.black, textColor: .white),
					(backgroundColor: LightRingColors.magenta, textColor: .white),
					(backgroundColor: LightRingColors.orange, textColor: .black),
					(backgroundColor: LightRingColors.yellow, textColor: .black),
					(backgroundColor: LightRingColors.teal, textColor: .black),
					(backgroundColor: LightRingColors.cyan, textColor: .black),
					(backgroundColor: LightRingColors.blue, textColor: .white),
					(backgroundColor: LightRingColors.magenta, textColor: .white)
				],
				contactPlaceholderFont: UIFont(for: .title1, at: fontWeight, size: 28),
				
				loginFont: UIFont(for: .title3, maxSize: 30),
				loginAppVersionFont: UIFont(for: .footnote, maxSize: 18),

				keypadStatusBarStyle: .default,
				keypadBackgroundColor: UIColor.white.withAlphaComponent(0.33),
				keypadBlurEffectStyle: .light,
				keypadButtonBackgroundColor: UIColor.black.withAlphaComponent(0.1),
				keypadButtonTextColor: .black,
				keypadButtonFont: UIFont(for: .title1, at: fontWeight, maxSize: 60),
				keypadButtonSecondaryTextColor: .black,
				keypadButtonSecondaryFont: UIFont(for: .caption1, at: fontWeight, maxSize: 20),
				keypadButtonHighlightedColor: MarketingColors.blue,
				keypadToggleHighlightedColor: Theme.lightestGray.withAlphaComponent(0.8),
				keypadToggleSelectedColor: UIColor.black.withAlphaComponent(0.4),
				keypadButtonBorderWidth: 0,
				keypadButtonBorderColor: .clear,
				keypadPrimaryButtonBackgroundColor: MarketingColors.sorensonGold,
				keypadPrimaryButtonTextColor: .white,
				keypadPrimaryButtonHighlightedColor: .white,
				keypadPrimaryButtonBorderWidth: 0,
				keypadPrimaryButtonBorderColor: .clear,

				keypadUserPhoneNumberBackground: .clear,
				keypadUserPhoneNumberTextColor: .black,
				keypadUserPhoneNumberAlertBackground: Theme.lighterRed,
				keypadUserPhoneNumberAlertTextColor: .black,
				keypadUserPhoneNumberFont: UIFont(for: .subheadline, at: .semibold, maxSize: 40),

				keypadContactNameTintColor: MarketingColors.blue,
				keypadContactNameTextColor: .black,
				keypadContactNameFont: UIFont(for: .title2, at: fontWeight, maxSize: 40),

				keypadInputTextColor: .black,
				keypadInputFont: UIFont(for: .title1, at: fontWeight, maxSize: 50),

				recentsSummaryBlurStyle: .light,
				recentsSummaryBackgroundColor: .clear,
				recentsSummaryTextColor: Theme.darkestGray,
				recentsSummarySecondaryTextColor: .black,
				recentsSummaryAlertTextColor: Theme.red,
				recentsSummaryHighlightedColor: UIColor.white.withAlphaComponent(0.5),

				segmentedControlTintColor: MarketingColors.blue,
				segmentedControlTextColor: .black,
				segmentedControlSecondaryTextColor: .white
			),
			Theme(
				identifier: "contrast",
				name: "High Contrast".localized,

				statusBarStyle: .lightContent,
				keyboardAppearance: .dark,

				backgroundColor: Theme.black,
				tintColor: HighContrastDarkColors.yellow,
				textColor: .white,
				secondaryTextColor: .cyan,
				placeholderTextColor: MarketingColors.green,

				navBackgroundColor: Theme.black,
				navTintColor: HighContrastDarkColors.yellow,
				navTextColor: .white,
				navSecondaryTextColor: .white,
				navBarStyle: .black,
				navTranslucent: false,

				searchBackgroundColor: Theme.black,
				searchTintColor: HighContrastDarkColors.yellow,
				searchBarStyle: .default,
				searchTranslucent: false,

				tabBarBackgroundColor: Theme.black,
				tabBarUnselectedColor: HighContrastDarkColors.lighterGray,
				tabBarTintColor: HighContrastDarkColors.yellow,
				tabBarBadgeColor: HighContrastDarkColors.red,
				tabBarTranslucent: true,

				tableSeparatorColor: HighContrastDarkColors.lighterGray,
				tableSectionIndexBackgroundColor: .clear,
				tableSectionIndexTextColor: HighContrastDarkColors.yellow,
				tableHeaderBackgroundColor: Theme.black,
				tableHeaderTextColor: HighContrastDarkColors.yellow,
				tableHeaderGroupedTextColor: HighContrastDarkColors.yellow,
				tableHeaderFont: UIFont(for: .footnote, at: .regular),
				tableFooterBackgroundColor: Theme.black,
				tableFooterTextColor: .cyan,
				tableFooterGroupedTextColor: .cyan,
				tableFooterFont: UIFont(for: .footnote, at: .regular),

				tableRowPrimaryActionBackgroundColor: HighContrastDarkColors.green,
				tableRowSecondaryActionBackgroundColor: HighContrastDarkColors.blue,
				tableRowDestructiveActionBackgroundColor: HighContrastDarkColors.red,

				tableCellBackgroundColor: Theme.black,
				tableCellTintColor: HighContrastDarkColors.yellow, tableCellDetailTintColor: HighContrastDarkColors.yellow,
				tableCellTextColor: .white,
				tableCellFont: UIFont(for: .headline, at: .bold),
				tableCellPlaceholderTextColor: MarketingColors.green,
				tableCellSecondaryTextColor: .cyan,
				tableCellSecondaryFont: UIFont(for: .subheadline, at: .medium),
				tableCellAlertTextColor: HighContrastDarkColors.red,

				contactPlaceholderColors: [
					(backgroundColor: HighContrastDarkColors.yellow, textColor: .black),
				],
				contactPlaceholderFont: UIFont(for: .title1, at: fontWeight, size: 28),
				
				loginFont: UIFont(for: .title3, maxSize: 30),
				loginAppVersionFont: UIFont(for: .footnote, maxSize: 18),

				keypadStatusBarStyle: .lightContent,
				keypadBackgroundColor: .black,
				keypadBlurEffectStyle: .dark,
				keypadButtonBackgroundColor: Theme.black,
				keypadButtonTextColor: .white,
				keypadButtonFont: UIFont(for: .title1, at: fontWeight, maxSize: 60),
				keypadButtonSecondaryTextColor: HighContrastDarkColors.yellow,
				keypadButtonSecondaryFont: UIFont(for: .caption1, at: fontWeight, maxSize: 20),
				keypadButtonHighlightedColor: .white,
				keypadToggleHighlightedColor: .white,
				keypadToggleSelectedColor: .gray,
				keypadButtonBorderWidth: 2,
				keypadButtonBorderColor: .white,
				keypadPrimaryButtonBackgroundColor: HighContrastDarkColors.yellow,
				keypadPrimaryButtonTextColor: .black,
				keypadPrimaryButtonHighlightedColor: .white,
				keypadPrimaryButtonBorderWidth: 0,
				keypadPrimaryButtonBorderColor: .white,

				keypadUserPhoneNumberBackground: .clear,
				keypadUserPhoneNumberTextColor: .white,
				keypadUserPhoneNumberAlertBackground: HighContrastDarkColors.red,
				keypadUserPhoneNumberAlertTextColor: .white,
				keypadUserPhoneNumberFont: UIFont(for: .subheadline, at: .semibold, maxSize: 40),

				keypadContactNameTintColor: HighContrastDarkColors.yellow,
				keypadContactNameTextColor: .cyan,
				keypadContactNameFont: UIFont(for: .title2, at: fontWeight, maxSize: 40),

				keypadInputTextColor: .white,
				keypadInputFont: UIFont(for: .title1, at: fontWeight, maxSize: 50),

				recentsSummaryBlurStyle: .dark,
				recentsSummaryBackgroundColor: Theme.black,
				recentsSummaryTextColor: HighContrastDarkColors.yellow,
				recentsSummarySecondaryTextColor: .white,
				recentsSummaryAlertTextColor: HighContrastDarkColors.red,
				recentsSummaryHighlightedColor: .white,

				segmentedControlTintColor: HighContrastDarkColors.yellow,
				segmentedControlTextColor: .white,
				segmentedControlSecondaryTextColor: .black
			)
		]
	}
	
}


// MARK: Ugly Obj-C interface to themes

@objc(Theme)
class SCITheme: NSObject {
	@objc static let themeDidChangeNotification = Theme.themeDidChangeNotification
	
	@objc static var name: String { return Theme.current.name }
	@objc static var themeNames: [String] { return Theme.themes.map { $0.name } }
	@objc static var themeIdentifiers: [String] { return Theme.themes.map { $0.identifier } }
	@objc static var currentIdentifier: String {
		get { return Theme.currentThemeIdentifier }
		set { Theme.currentThemeIdentifier = newValue }
	}
	@objc static func applyTheme() {
		Theme.current.applyTheme()
	}
	
	@objc static func reloadThemes() {
		Theme.themes = Theme.loadThemes()
	}
	
	@objc static var statusBarStyle: UIStatusBarStyle { return Theme.current.statusBarStyle }
	@objc static var keyboardAppearance: UIKeyboardAppearance { return Theme.current.keyboardAppearance }
	@objc static var backgroundColor: UIColor { return Theme.current.backgroundColor }
	@objc static var textColor: UIColor { return Theme.current.textColor }
	@objc static var tintColor: UIColor { return Theme.current.tintColor }
	@objc static var searchBarStyle: UIBarStyle { return Theme.current.searchBarStyle }
	@objc static var tableCellBackgroundColor: UIColor { return Theme.current.tableCellBackgroundColor }
	@objc static var tableCellTextColor: UIColor { return Theme.current.tableCellTextColor }
	@objc static var tableCellSecondaryTextColor: UIColor { return Theme.current.tableCellSecondaryTextColor }
	@objc static var tableCellTintColor: UIColor { return Theme.current.tableCellTintColor }
	@objc static var tableCellDetailTintColor: UIColor { return Theme.current.tableCellDetailTintColor }
	@objc static var tableRowDestructiveActionBackgroundColor: UIColor { return Theme.current.tableRowDestructiveActionBackgroundColor }
	@objc static var tableHeaderBackgroundColor: UIColor { return Theme.current.tableHeaderBackgroundColor }
	@objc static var tableHeaderTextColor: UIColor { return Theme.current.tableHeaderTextColor }
	@objc static var tableHeaderGroupedTextColor: UIColor { return Theme.current.tableHeaderGroupedTextColor }
	@objc static var tableHeaderFont: UIFont { return Theme.current.tableHeaderFont }
	
	@objc static var tableFooterBackgroundColor: UIColor { return Theme.current.tableFooterBackgroundColor }
	@objc static var tableFooterTextColor: UIColor { return Theme.current.tableFooterTextColor }
	@objc static var tableFooterGroupedTextColor: UIColor { return Theme.current.tableFooterGroupedTextColor }
	@objc static var tableFooterFont: UIFont { return Theme.current.tableFooterFont }
}
